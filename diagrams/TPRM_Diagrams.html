<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TPRM Process Flow Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --text-primary: #eaeaea;
            --text-secondary: #a0a0a0;
            --accent: #e94560;
            --border: #0f3460;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }
        .header {
            background: var(--bg-secondary);
            padding: 2rem;
            text-align: center;
            border-bottom: 3px solid var(--accent);
        }
        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .header p { color: var(--text-secondary); font-size: 1.1rem; }
        .nav {
            background: var(--bg-secondary);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border);
        }
        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }
        .nav a {
            color: var(--text-primary);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            background: var(--bg-card);
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        .nav a:hover { background: var(--accent); }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .diagram-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            margin-bottom: 2rem;
            overflow: hidden;
            border: 1px solid var(--border);
        }
        .diagram-header {
            background: var(--bg-card);
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        .diagram-header h2 { color: var(--accent); margin-bottom: 0.5rem; }
        .diagram-header p { color: var(--text-secondary); }
        .diagram-content {
            padding: 2rem;
            background: #ffffff;
            display: flex;
            justify-content: center;
            overflow-x: auto;
        }
        .mermaid { min-width: 100%; }
        .controls {
            padding: 1rem 1.5rem;
            background: var(--bg-card);
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        .btn-primary { background: var(--accent); color: white; }
        .btn-primary:hover { background: #ff6b6b; }
        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        .btn-secondary:hover { background: var(--bg-primary); }
        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
        }
        @media print {
            .nav, .controls, .btn { display: none; }
            .diagram-section { break-inside: avoid; page-break-inside: avoid; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>TPRM Process Flow Diagrams</h1>
        <p>Third Party Risk Management - Visual Process Documentation</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem;">AI TPRM Machine - Sleep Number Corporation</p>
    </div>

    <nav class="nav">
        <ul>
            <li><a href="#lifecycle">TPRM Lifecycle</a></li>
            <li><a href="#onboarding">Vendor Onboarding</a></li>
            <li><a href="#risk-assessment">Risk Assessment</a></li>
            <li><a href="#due-diligence">Due Diligence</a></li>
            <li><a href="#contract">Contract Management</a></li>
            <li><a href="#monitoring">Ongoing Monitoring</a></li>
            <li><a href="#incident">Incident Response</a></li>
            <li><a href="#offboarding">Vendor Offboarding</a></li>
            <li><a href="#risk-tiers">Risk Tiers</a></li>
        </ul>
    </nav>

    <div class="container">

        <!-- TPRM Lifecycle -->
        <section id="lifecycle" class="diagram-section">
            <div class="diagram-header">
                <h2>1. TPRM Lifecycle Overview</h2>
                <p>High-level view of the Third Party Risk Management lifecycle phases</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart LR
    subgraph LIFECYCLE["TPRM LIFECYCLE"]
        A[("1. IDENTIFY<br/>Vendor Selection")] --> B[("2. ASSESS<br/>Risk Assessment")]
        B --> C[("3. ENGAGE<br/>Contracting")]
        C --> D[("4. MONITOR<br/>Ongoing Oversight")]
        D --> E[("5. EXIT<br/>Offboarding")]
        E -.-> A
    end
    style A fill:#4285F4,stroke:#1a73e8,color:#fff
    style B fill:#FBBC04,stroke:#f9a825,color:#000
    style C fill:#34A853,stroke:#1e8e3e,color:#fff
    style D fill:#A142F4,stroke:#8430ce,color:#fff
    style E fill:#EA4335,stroke:#c5221f,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('lifecycle')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('lifecycle')">Download PNG</button>
            </div>
        </section>

        <!-- Vendor Onboarding -->
        <section id="onboarding" class="diagram-section">
            <div class="diagram-header">
                <h2>2. Vendor Onboarding Process</h2>
                <p>Complete workflow for onboarding new third-party vendors</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    START((Start)) --> A[Business Unit submits<br/>vendor request]
    A --> B[TPRM Team<br/>reviews request]
    B --> C[Request vendor<br/>questionnaire]
    C --> D[Vendor submits<br/>questionnaire]
    D --> E[Determine inherent<br/>risk tier]
    E --> F{Risk Tier?}
    F -->|High/Critical| G[Enhanced<br/>due diligence]
    F -->|Medium| H[Standard<br/>due diligence]
    F -->|Low| I[Limited<br/>due diligence]
    G --> J{Approved?}
    H --> J
    I --> J
    J -->|No| K[Return to BU<br/>with findings]
    K --> END1((End<br/>Rejected))
    J -->|Yes| L[Contract<br/>negotiation]
    L --> M[System access<br/>provisioning]
    M --> N[Add to<br/>monitoring]
    N --> END2((End<br/>Active))
    style START fill:#34A853,stroke:#1e8e3e,color:#fff
    style END1 fill:#EA4335,stroke:#c5221f,color:#fff
    style END2 fill:#34A853,stroke:#1e8e3e,color:#fff
    style F fill:#FBBC04,stroke:#f9a825,color:#000
    style J fill:#FBBC04,stroke:#f9a825,color:#000
    style G fill:#EA4335,stroke:#c5221f,color:#fff
    style H fill:#4285F4,stroke:#1a73e8,color:#fff
    style I fill:#34A853,stroke:#1e8e3e,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('onboarding')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('onboarding')">Download PNG</button>
            </div>
        </section>

        <!-- Risk Assessment -->
        <section id="risk-assessment" class="diagram-section">
            <div class="diagram-header">
                <h2>3. Risk Assessment Process</h2>
                <p>Risk scoring methodology and assessment workflow</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    subgraph INHERENT["INHERENT RISK ASSESSMENT"]
        A1[Data Sensitivity<br/>1-5] --> CALC
        A2[Access Level<br/>1-5] --> CALC
        A3[Criticality Rating<br/>1-5] --> CALC
        A4[Financial Exposure<br/>1-5] --> CALC
        CALC[Calculate<br/>Inherent Risk Score<br/>4-20]
    end
    CALC --> TIER{Risk Tier}
    TIER -->|15-20| HIGH[HIGH RISK<br/>Enhanced DD<br/>Semi-annual review]
    TIER -->|10-14| MED[MEDIUM RISK<br/>Standard DD<br/>Annual review]
    TIER -->|4-9| LOW[LOW RISK<br/>Limited DD<br/>Biennial review]
    subgraph CONTROLS["CONTROL ASSESSMENT"]
        HIGH --> CA
        MED --> CA
        LOW --> CA
        CA[Control Assessment]
        CA --> C1[Security controls]
        CA --> C2[Compliance certs]
        CA --> C3[Pen test results]
        CA --> C4[SOC reports]
        CA --> C5[BC/DR review]
    end
    C1 --> RES
    C2 --> RES
    C3 --> RES
    C4 --> RES
    C5 --> RES
    RES[RESIDUAL RISK<br/>Inherent - Controls]
    RES --> RATING((Final<br/>Risk Rating))
    style TIER fill:#FBBC04,stroke:#f9a825,color:#000
    style HIGH fill:#EA4335,stroke:#c5221f,color:#fff
    style MED fill:#FBBC04,stroke:#f9a825,color:#000
    style LOW fill:#34A853,stroke:#1e8e3e,color:#fff
    style RATING fill:#A142F4,stroke:#8430ce,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('risk-assessment')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('risk-assessment')">Download PNG</button>
            </div>
        </section>

        <!-- Due Diligence -->
        <section id="due-diligence" class="diagram-section">
            <div class="diagram-header">
                <h2>4. Due Diligence Process</h2>
                <p>Swimlane diagram showing due diligence workflow across teams</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    subgraph ANALYST["TPRM Analyst"]
        A1[Prepare DD package] --> A2[Request documents]
        A5[Review SOC reports] --> A6[Compile findings<br/>& rating]
    end
    subgraph VENDOR["Vendor"]
        V1[Provide evidence<br/>& documents]
    end
    subgraph SME["SME Reviewers"]
        S1[Security review]
        S2[Legal review]
        S3[Privacy review]
    end
    subgraph MANAGER["TPRM Manager"]
        M1[Review & approve]
    end
    A2 --> V1
    V1 --> A5
    A5 --> S1
    S1 --> S2
    S2 --> S3
    S3 --> A6
    A6 --> M1
    M1 --> DONE((Complete))
    style A1 fill:#4285F4,stroke:#1a73e8,color:#fff
    style A2 fill:#4285F4,stroke:#1a73e8,color:#fff
    style A5 fill:#4285F4,stroke:#1a73e8,color:#fff
    style A6 fill:#4285F4,stroke:#1a73e8,color:#fff
    style V1 fill:#A142F4,stroke:#8430ce,color:#fff
    style S1 fill:#FBBC04,stroke:#f9a825,color:#000
    style S2 fill:#FBBC04,stroke:#f9a825,color:#000
    style S3 fill:#FBBC04,stroke:#f9a825,color:#000
    style M1 fill:#34A853,stroke:#1e8e3e,color:#fff
    style DONE fill:#34A853,stroke:#1e8e3e,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('due-diligence')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('due-diligence')">Download PNG</button>
            </div>
        </section>

        <!-- Contract Management -->
        <section id="contract" class="diagram-section">
            <div class="diagram-header">
                <h2>5. Contract & SLA Management</h2>
                <p>Contract negotiation, required clauses, and management workflow</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    START[Risk Assessment<br/>Complete] --> A[TPRM provides<br/>security requirements]
    A --> B[Legal drafts/<br/>reviews contract]
    B --> REQ[Required Clauses]
    REQ --> R1[Data protection]
    REQ --> R2[Security standards]
    REQ --> R3[Audit rights]
    REQ --> R4[Breach notification]
    REQ --> R5[Termination rights]
    REQ --> R6[SLA definitions]
    B --> C{Vendor<br/>accepts?}
    C -->|No| D[Negotiate terms]
    D --> C
    C -->|Yes| E[Execute contract]
    E --> F[Record in CLM<br/>& AuditBoard]
    F --> G[Set renewal<br/>reminders]
    G --> DONE((Complete))
    style START fill:#4285F4,stroke:#1a73e8,color:#fff
    style C fill:#FBBC04,stroke:#f9a825,color:#000
    style DONE fill:#34A853,stroke:#1e8e3e,color:#fff
    style REQ fill:#9AA0A6,stroke:#5f6368,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('contract')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('contract')">Download PNG</button>
            </div>
        </section>

        <!-- Ongoing Monitoring -->
        <section id="monitoring" class="diagram-section">
            <div class="diagram-header">
                <h2>6. Ongoing Monitoring Process</h2>
                <p>Continuous vendor monitoring and periodic reassessment workflow</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    subgraph CONTINUOUS["CONTINUOUS MONITORING"]
        M1[Security Ratings<br/>BitSight/SecurityScorecard]
        M2[News & Media<br/>Alerts]
        M3[Financial Health<br/>Monitors]
        M1 --> DASH
        M2 --> DASH
        M3 --> DASH
        DASH[Alert Dashboard]
    end
    DASH --> A{Alert<br/>triggered?}
    A -->|No| LOG[Document in<br/>AuditBoard]
    A -->|Yes| B[TPRM Analyst<br/>investigates]
    B --> C{Material<br/>impact?}
    C -->|No| LOG
    C -->|Yes| D[Escalate to<br/>TPRM Manager]
    D --> E[Initiate<br/>reassessment]
    E --> LOG
    LOG --> PERIODIC
    subgraph PERIODIC["PERIODIC REASSESSMENT"]
        P1[Critical: Quarterly]
        P2[High: Semi-annual]
        P3[Medium: Annual]
        P4[Low: Biennial]
    end
    style A fill:#FBBC04,stroke:#f9a825,color:#000
    style C fill:#FBBC04,stroke:#f9a825,color:#000
    style D fill:#EA4335,stroke:#c5221f,color:#fff
    style E fill:#EA4335,stroke:#c5221f,color:#fff
    style DASH fill:#4285F4,stroke:#1a73e8,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('monitoring')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('monitoring')">Download PNG</button>
            </div>
        </section>

        <!-- Incident Response -->
        <section id="incident" class="diagram-section">
            <div class="diagram-header">
                <h2>7. Vendor Incident Response</h2>
                <p>Process for responding to vendor security incidents by severity</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    START((Incident<br/>Detected)) --> A[Log incident<br/>in system]
    A --> B[Initial triage<br/>& severity]
    B --> SEV{Severity?}
    SEV --> P1[P1 - Critical]
    SEV --> P2[P2 - High]
    SEV --> P3[P3 - Medium]
    SEV --> P4[P4 - Low]
    P1 --> NOTIFY
    P2 --> NOTIFY
    P3 --> NOTIFY
    P4 --> NOTIFY
    NOTIFY[Notify stakeholders<br/>per severity SLA]
    NOTIFY --> C[Coordinate with<br/>vendor]
    C --> D[Assess impact to<br/>our data/operations]
    D --> E{Our data<br/>affected?}
    E -->|Yes| F[Activate internal<br/>IR process]
    F --> G
    E -->|No| G[Monitor vendor<br/>remediation]
    G --> H[Post-incident<br/>review]
    H --> I[Update risk<br/>assessment]
    I --> J{Continue<br/>vendor?}
    J -->|No| K[Initiate<br/>offboarding]
    K --> END1((End))
    J -->|Yes| L[Update controls<br/>& monitoring]
    L --> END2((Complete))
    style START fill:#EA4335,stroke:#c5221f,color:#fff
    style SEV fill:#FBBC04,stroke:#f9a825,color:#000
    style P1 fill:#EA4335,stroke:#c5221f,color:#fff
    style P2 fill:#FF6D01,stroke:#e65100,color:#fff
    style P3 fill:#FBBC04,stroke:#f9a825,color:#000
    style P4 fill:#34A853,stroke:#1e8e3e,color:#fff
    style E fill:#FBBC04,stroke:#f9a825,color:#000
    style J fill:#FBBC04,stroke:#f9a825,color:#000
    style END1 fill:#EA4335,stroke:#c5221f,color:#fff
    style END2 fill:#34A853,stroke:#1e8e3e,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('incident')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('incident')">Download PNG</button>
            </div>
        </section>

        <!-- Vendor Offboarding -->
        <section id="offboarding" class="diagram-section">
            <div class="diagram-header">
                <h2>8. Vendor Offboarding Process</h2>
                <p>Complete workflow for safely offboarding vendors</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    START((Offboarding<br/>Triggered)) --> TRIG
    subgraph TRIG["TRIGGERS"]
        T1[Contract expiration]
        T2[Business decision]
        T3[Risk-based termination]
    end
    TRIG --> A[Notify vendor<br/>per contract terms]
    A --> PARALLEL
    subgraph PARALLEL["PARALLEL WORKSTREAMS"]
        subgraph DATA["DATA"]
            D1[Request data return]
            D2[Verify deletion]
            D3[Get destruction cert]
        end
        subgraph ACCESS["ACCESS"]
            A1[Revoke system access]
            A2[Disable VPN]
            A3[Remove from directories]
        end
        subgraph KNOWLEDGE["KNOWLEDGE"]
            K1[Document processes]
            K2[Transfer knowledge]
            K3[Archive records]
        end
    end
    PARALLEL --> CHECK
    subgraph CHECK["OFFBOARDING CHECKLIST"]
        C1[Data destruction cert]
        C2[All access revoked]
        C3[Final invoice settled]
        C4[Documentation archived]
        C5[Contract terminated]
        C6[AuditBoard updated]
    end
    CHECK --> B[Final review<br/>& sign-off]
    B --> C[Archive vendor<br/>in AuditBoard]
    C --> DONE((Complete))
    style START fill:#EA4335,stroke:#c5221f,color:#fff
    style DONE fill:#34A853,stroke:#1e8e3e,color:#fff
    style D1 fill:#4285F4,stroke:#1a73e8,color:#fff
    style A1 fill:#A142F4,stroke:#8430ce,color:#fff
    style K1 fill:#FBBC04,stroke:#f9a825,color:#000
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('offboarding')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('offboarding')">Download PNG</button>
            </div>
        </section>

        <!-- Risk Tier Matrix -->
        <section id="risk-tiers" class="diagram-section">
            <div class="diagram-header">
                <h2>9. Risk Tier Decision Matrix</h2>
                <p>Visual guide for determining vendor risk tiers based on scoring</p>
            </div>
            <div class="diagram-content">
                <div class="mermaid">
flowchart TD
    subgraph INPUT["RISK FACTORS"]
        F1["Data Sensitivity<br/>(1-5)"]
        F2["Access Level<br/>(1-5)"]
        F3["Business Criticality<br/>(1-5)"]
        F4["Financial Exposure<br/>(1-5)"]
    end
    F1 --> SCORE
    F2 --> SCORE
    F3 --> SCORE
    F4 --> SCORE
    SCORE["TOTAL SCORE<br/>(4-20)"]
    SCORE --> T1
    SCORE --> T2
    SCORE --> T3
    SCORE --> T4
    subgraph TIERS["RISK TIERS"]
        T1["CRITICAL (18-20)<br/>Full Enhanced DD<br/>Quarterly Review<br/>Approver: CISO + VP"]
        T2["HIGH (15-17)<br/>Enhanced DD<br/>Semi-annual Review<br/>Approver: TPRM Director"]
        T3["MEDIUM (10-14)<br/>Standard DD<br/>Annual Review<br/>Approver: TPRM Manager"]
        T4["LOW (4-9)<br/>Limited DD<br/>Biennial Review<br/>Approver: TPRM Analyst"]
    end
    style T1 fill:#EA4335,stroke:#c5221f,color:#fff
    style T2 fill:#FF6D01,stroke:#e65100,color:#fff
    style T3 fill:#FBBC04,stroke:#f9a825,color:#000
    style T4 fill:#34A853,stroke:#1e8e3e,color:#fff
    style SCORE fill:#4285F4,stroke:#1a73e8,color:#fff
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="downloadSVG('risk-tiers')">Download SVG</button>
                <button class="btn btn-primary" onclick="downloadPNG('risk-tiers')">Download PNG</button>
            </div>
        </section>

    </div>

    <footer class="footer">
        <p>TPRM Process Documentation - AI TPRM Machine</p>
        <p>Sleep Number Corporation</p>
        <p style="margin-top: 1rem; font-size: 0.85rem;">
            Export diagrams using the Download buttons, or copy Mermaid code for use in Lucidchart, Notion, or other tools.
        </p>
    </footer>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            securityLevel: 'loose'
        });

        function downloadSVG(diagramId) {
            const section = document.getElementById(diagramId);
            const svg = section.querySelector('svg');
            if (svg) {
                const svgData = new XMLSerializer().serializeToString(svg);
                const blob = new Blob([svgData], {type: 'image/svg+xml'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'TPRM_' + diagramId + '.svg';
                a.click();
                URL.revokeObjectURL(url);
            }
        }

        function downloadPNG(diagramId) {
            const section = document.getElementById(diagramId);
            const svg = section.querySelector('svg');
            if (svg) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const svgData = new XMLSerializer().serializeToString(svg);
                const img = new Image();
                const bbox = svg.getBoundingClientRect();
                canvas.width = bbox.width * 2;
                canvas.height = bbox.height * 2;
                ctx.scale(2, 2);
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                img.onload = function() {
                    ctx.drawImage(img, 0, 0);
                    const a = document.createElement('a');
                    a.href = canvas.toDataURL('image/png');
                    a.download = 'TPRM_' + diagramId + '.png';
                    a.click();
                };
                img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgData)));
            }
        }
    </script>
</body>
</html>
